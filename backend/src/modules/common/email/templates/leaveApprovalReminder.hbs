<html lang='en' dir='ltr'>
  <head>
    <meta charset='UTF-8' />
    <meta name='viewport' content='width=device-width, initial-scale=1.0' />
    <meta name='color-scheme' content='light' />
    <meta name='supported-color-schemes' content='light' />
    <title>{{companyName}} - Pending Leave Approvals</title>
    <style>
      body { margin: 0; padding: 0; width: 100%; font-family: 'Segoe UI', Tahoma, Geneva, Verdana,
      sans-serif; font-size: 15px; line-height: 1.6; color: #2d3748; background-color: #f7fafc; }
      .email-wrapper { padding: 40px 20px; background-color: #f7fafc; } .email-container {
      max-width: 700px; margin: 0 auto; background-color: #ffffff; border-radius: 8px; box-shadow: 0
      4px 6px rgba(0, 0, 0, 0.07); overflow: hidden; } .header { background: linear-gradient(135deg,
      #1a365d 0%, #2c5282 100%); padding: 32px 40px; text-align: center; } .header.critical {
      background: linear-gradient(135deg, #742a2a 0%, #c53030 100%); } .header.urgent {
      background: linear-gradient(135deg, #744210 0%, #c05621 100%); } .logo { max-width: 120px;
      height: auto; display: block; margin: 0 auto 16px; border-radius: 8px; } .company-name {
      color: #ffffff; font-size: 22px; font-weight: 600; margin: 0; letter-spacing: 0.5px; }
      .content { padding: 40px; } .greeting { font-size: 16px; color: #1a365d; margin-bottom: 20px;
      } .message-text { color: #4a5568; margin-bottom: 24px; line-height: 1.7; } /* Countdown Box */
      .countdown-box { background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%); border: 2px solid
      #f59e0b; border-radius: 12px; padding: 24px; margin: 24px 0; text-align: center; }
      .countdown-box.critical { background: linear-gradient(135deg, #fed7d7 0%, #feb2b2 100%);
      border-color: #c53030; } .countdown-box.urgent { background: linear-gradient(135deg, #feebc8 0%,
      #fbd38d 100%); border-color: #dd6b20; } .countdown-days { font-size: 56px; font-weight: 800;
      color: #92400e; line-height: 1; } .countdown-box.critical .countdown-days { color: #c53030; }
      .countdown-box.urgent .countdown-days { color: #c05621; } .countdown-label { font-size: 14px;
      color: #78350f; font-weight: 600; text-transform: uppercase; letter-spacing: 1px; margin-top:
      8px; } .countdown-box.critical .countdown-label { color: #9b2c2c; } .countdown-box.urgent
      .countdown-label { color: #9c4221; } .countdown-date { font-size: 13px; color: #92400e;
      margin-top: 12px; } .countdown-box.critical .countdown-date { color: #c53030; }
      .countdown-box.urgent .countdown-date { color: #c05621; } /* Section Headers */ .section-header
      { display: flex; align-items: center; gap: 12px; margin: 32px 0 16px 0; } .section-header.urgent
      { color: #c53030; } .section-header.pending { color: #2c5282; } .section-icon { width: 28px;
      height: 28px; border-radius: 50%; display: flex; align-items: center; justify-content: center;
      font-size: 14px; font-weight: bold; } .section-header.urgent .section-icon { background-color:
      #fed7d7; color: #c53030; } .section-header.pending .section-icon { background-color: #bee3f8;
      color: #2c5282; } .section-title { font-size: 16px; font-weight: 600; margin: 0; } /* Leave
      Item */ .leave-item { background-color: #f7fafc; border: 1px solid #e2e8f0; border-radius: 8px;
      margin-bottom: 12px; overflow: hidden; } .leave-item.urgent { border-left: 4px solid #c53030; }
      .leave-item.pending { border-left: 4px solid #3182ce; } .leave-header { padding: 14px 20px;
      background-color: #edf2f7; border-bottom: 1px solid #e2e8f0; } .leave-employee { font-size:
      15px; font-weight: 600; color: #1a365d; margin: 0; } .leave-body { padding: 14px 20px; } /*
      Status Badge */ .status-badge { display: inline-block; padding: 4px 12px; border-radius: 12px;
      font-size: 11px; font-weight: 600; text-transform: uppercase; letter-spacing: 0.5px;
      margin-top: 10px; } .status-badge.urgent { background-color: #fed7d7; color: #c53030; }
      .status-badge.pending { background-color: #bee3f8; color: #2c5282; } /* Category Badge */
      .category-badge { display: inline-block; padding: 3px 10px; border-radius: 10px; font-size:
      10px; font-weight: 600; text-transform: uppercase; letter-spacing: 0.5px; background-color:
      #e9d8fd; color: #553c9a; } /* Legend */ .legend { display: flex; gap: 24px; margin: 24px 0;
      padding: 16px 20px; background-color: #f7fafc; border-radius: 6px; } .legend-item { display:
      flex; align-items: center; gap: 8px; font-size: 12px; color: #4a5568; } .legend-dot { width:
      12px; height: 12px; border-radius: 50%; } .legend-dot.urgent { background-color: #c53030; }
      .legend-dot.pending { background-color: #3182ce; } /* Button */ .button-container { text-align:
      center; margin: 32px 0; } .button { display: inline-block; padding: 14px 32px; background:
      linear-gradient(135deg, #2c5282 0%, #1a365d 100%); color: #ffffff !important; text-decoration:
      none; border-radius: 6px; font-weight: 600; font-size: 14px; letter-spacing: 0.5px; } .divider
      { height: 1px; background-color: #e2e8f0; margin: 28px 0; } .signature { margin-top: 28px;
      color: #4a5568; } .signature-name { color: #1a365d; font-weight: 600; } .footer {
      background-color: #f7fafc; text-align: center; padding: 24px 40px; border-top: 1px solid
      #e2e8f0; } .footer-text { color: #718096; font-size: 12px; margin: 0 0 8px 0; } .footer-company
      { color: #a0aec0; font-size: 11px; margin: 0; } /* Note Box */ .note-box { background-color:
      #dcfce7; border: 1px solid #4ade80; border-left: 4px solid #16a34a; padding: 16px 20px;
      border-radius: 0 6px 6px 0; margin: 24px 0; } .note-box p { margin: 0; color: #14532d;
      font-size: 14px; } .note-box strong { color: #166534; } /* Warning Box */ .warning-box {
      background-color: #fef3c7; border: 1px solid #f59e0b; border-left: 4px solid #d97706; padding:
      16px 20px; border-radius: 0 6px 6px 0; margin: 24px 0; } .warning-box p { margin: 0; color:
      #92400e; font-size: 14px; } .warning-box strong { color: #78350f; } /* Critical Box */
      .critical-box { background-color: #fed7d7; border: 1px solid #fc8181; border-left: 4px solid
      #c53030; padding: 16px 20px; border-radius: 0 6px 6px 0; margin: 24px 0; } .critical-box p {
      margin: 0; color: #9b2c2c; font-size: 14px; } .critical-box strong { color: #742a2a; } @media
      screen and (max-width: 600px) { .content { padding: 28px 24px; } .header { padding: 24px; }
      .footer { padding: 20px 24px; } .legend { flex-direction: column; gap: 12px; } .countdown-days
      { font-size: 42px; } }
    </style>
  </head>
  <body>
    <div class='email-wrapper'>
      <div class='email-container'>
        <div class='header {{urgencyLevel}}'>
          <img
            src='{{companyLogo}}'
            alt='{{companyName}}'
            class='logo'
          />
          <p class='company-name'>{{companyName}}</p>
        </div>

        <div class='content'>
          <p class='greeting'><strong>üìã Pending Leave Approvals</strong></p>

          <p class='message-text'>
            This is a reminder about leave applications awaiting your approval. Pending leaves will
            be <strong>automatically approved</strong> on the 1st of next month for payroll
            processing.
          </p>

          <!-- Countdown Box -->
          <div class='countdown-box {{urgencyLevel}}'>
            <div class='countdown-days'>{{daysUntilAutoApproval}}</div>
            <div class='countdown-label'>
              {{#if (eq daysUntilAutoApproval 1)}}Day{{else}}Days{{/if}} Until Auto-Approval
            </div>
            <div class='countdown-date'>Auto-approval on: {{autoApprovalDate}}</div>
          </div>

          <!-- Summary Cards - Table Based -->
          <table width='100%' cellpadding='0' cellspacing='0' border='0' style='margin: 24px 0;'>
            <!-- Row 1: Total Pending | Days Remaining -->
            <tr>
              <td style='padding-right: 8px; width: 50%;'>
                <table width='100%' cellpadding='0' cellspacing='0' border='0'>
                  <tr>
                    <td
                      style='background: linear-gradient(135deg, #ebf8ff 0%, #bee3f8 100%); border: 1px solid #90cdf4; border-radius: 8px; padding: 16px; text-align: center;'
                    >
                      <div
                        style='font-size: 32px; font-weight: 700; line-height: 1; color: #2c5282;'
                      >{{totalPending}}</div>
                      <div
                        style='font-size: 11px; color: #2b6cb0; text-transform: uppercase; letter-spacing: 0.5px; margin-top: 8px;'
                      >Total Pending</div>
                    </td>
                  </tr>
                </table>
              </td>
              <td style='padding-left: 8px; width: 50%;'>
                <table width='100%' cellpadding='0' cellspacing='0' border='0'>
                  <tr>
                    <td
                      style='background: {{#if (eq urgencyLevel "critical")}}linear-gradient(135deg, #fed7d7 0%, #feb2b2 100%); border: 1px solid #fc8181;{{else if (eq urgencyLevel "urgent")}}linear-gradient(135deg, #feebc8 0%, #fbd38d 100%); border: 1px solid #f6ad55;{{else}}linear-gradient(135deg, #fef3c7 0%, #fde68a 100%); border: 1px solid #f6e05e;{{/if}} border-radius: 8px; padding: 16px; text-align: center;'
                    >
                      <div
                        style='font-size: 32px; font-weight: 700; line-height: 1; {{#if (eq urgencyLevel "critical")}}color: #c53030;{{else if (eq urgencyLevel "urgent")}}color: #c05621;{{else}}color: #92400e;{{/if}}'
                      >{{daysUntilAutoApproval}}</div>
                      <div
                        style='font-size: 11px; {{#if (eq urgencyLevel "critical")}}color: #9b2c2c;{{else if (eq urgencyLevel "urgent")}}color: #9c4221;{{else}}color: #b45309;{{/if}} text-transform: uppercase; letter-spacing: 0.5px; margin-top: 8px;'
                      >Days Left</div>
                    </td>
                  </tr>
                </table>
              </td>
            </tr>
            <!-- Row 2: Urgent Leaves Warning (only if exists) -->
            {{#if hasUrgent}}
            <tr>
              <td colspan='2' style='padding-top: 16px;'>
                <table width='100%' cellpadding='0' cellspacing='0' border='0'>
                  <tr>
                    <td
                      style='background: linear-gradient(135deg, #fed7d7 0%, #feb2b2 100%); border: 1px solid #fc8181; border-radius: 8px; padding: 16px; text-align: center;'
                    >
                      <div
                        style='font-size: 32px; font-weight: 700; line-height: 1; color: #c53030;'
                      >‚ö†Ô∏è {{totalUrgent}}</div>
                      <div
                        style='font-size: 11px; color: #9b2c2c; text-transform: uppercase; letter-spacing: 0.5px; margin-top: 8px;'
                      >Pending 5+ Days - Need Urgent Attention</div>
                    </td>
                  </tr>
                </table>
              </td>
            </tr>
            {{/if}}
          </table>

          <!-- Category Summary -->
          {{#if categorySummaries.length}}
          <table width='100%' cellpadding='0' cellspacing='0' border='0' style='margin: 16px 0;'>
            <tr>
              <td style='background-color: #f7fafc; border: 1px solid #e2e8f0; border-radius: 8px; padding: 16px;'>
                <div style='font-size: 12px; color: #718096; text-transform: uppercase; letter-spacing: 0.5px; margin-bottom: 12px;'>Pending by Category</div>
                <table width='100%' cellpadding='0' cellspacing='0' border='0'>
                  <tr>
                    {{#each categorySummaries}}
                    <td style='text-align: center; padding: 4px;'>
                      <div style='font-size: 24px; font-weight: 700; color: #1a365d;'>{{count}}</div>
                      <div style='font-size: 10px; color: #718096; text-transform: uppercase;'>{{displayName}}</div>
                    </td>
                    {{/each}}
                  </tr>
                </table>
              </td>
            </tr>
          </table>
          {{/if}}

          <!-- Legend -->
          <table width='100%' cellpadding='0' cellspacing='0' border='0' style='background-color: #f7fafc; border-radius: 8px; margin: 24px 0;'>
            <tr>
              <td style='padding: 16px 20px;'>
                <table width='100%' cellpadding='0' cellspacing='0' border='0'>
                  <tr>
                    <td style='padding-bottom: 12px;'>
                      <table cellpadding='0' cellspacing='0' border='0'>
                        <tr>
                          <td style='width: 20px; vertical-align: middle;'>
                            <div style='width: 12px; height: 12px; min-width: 12px; min-height: 12px; max-width: 12px; max-height: 12px; background-color: #c53030; border-radius: 50%;'></div>
                          </td>
                          <td style='padding-left: 12px; vertical-align: middle; font-size: 13px; color: #4a5568;'>
                            <strong style='color: #c53030;'>Urgent</strong> - Pending 5+ days
                          </td>
                        </tr>
                      </table>
                    </td>
                  </tr>
                  <tr>
                    <td>
                      <table cellpadding='0' cellspacing='0' border='0'>
                        <tr>
                          <td style='width: 20px; vertical-align: middle;'>
                            <div style='width: 12px; height: 12px; min-width: 12px; min-height: 12px; max-width: 12px; max-height: 12px; background-color: #3182ce; border-radius: 50%;'></div>
                          </td>
                          <td style='padding-left: 12px; vertical-align: middle; font-size: 13px; color: #4a5568;'>
                            <strong style='color: #2c5282;'>Pending</strong> - Awaiting approval
                          </td>
                        </tr>
                      </table>
                    </td>
                  </tr>
                </table>
              </td>
            </tr>
          </table>

          {{#if hasUrgent}}
            <!-- Urgent Leaves Section -->
            <table width='100%' cellpadding='0' cellspacing='0' border='0' style='margin: 32px 0 16px 0;'>
              <tr>
                <td width='36' style='vertical-align: middle;'>
                  <div style='width: 28px; height: 28px; min-width: 28px; min-height: 28px; max-width: 28px; max-height: 28px; background-color: #fed7d7; border-radius: 50%; text-align: center; line-height: 28px;'>
                    <span style='font-size: 16px;'>üö´</span>
                  </div>
                </td>
                <td style='vertical-align: middle; padding-left: 8px;'>
                  <h3 style='font-size: 16px; font-weight: 600; margin: 0; color: #c53030;'>Urgent Leave Requests ({{totalUrgent}})</h3>
                </td>
              </tr>
            </table>

            <div class='critical-box'>
              <p>
                <strong>‚ö†Ô∏è Requires Immediate Attention:</strong>
                These leave applications have been pending for more than 5 days.
                Please review and take action promptly.
              </p>
            </div>

            {{#each urgentLeaves}}
              <div class='leave-item urgent'>
                <div class='leave-header'>
                  <table width='100%' cellpadding='0' cellspacing='0' border='0'>
                    <tr>
                      <td>
                        <p class='leave-employee'>{{employeeName}}</p>
                      </td>
                      <td style='text-align: right;'>
                        <span class='category-badge'>{{leaveCategory}}</span>
                      </td>
                    </tr>
                  </table>
                </div>
                <div class='leave-body'>
                  <table width='100%' cellpadding='0' cellspacing='0' border='0'>
                    <tr>
                      <td style='padding: 4px; width: 50%;'>
                        <div
                          style='padding: 8px; background-color: #ffffff; border-radius: 4px; border: 1px solid #e2e8f0;'
                        >
                          <div
                            style='font-size: 10px; color: #718096; text-transform: uppercase; letter-spacing: 0.5px;'
                          >Leave Dates</div>
                          <div
                            style='font-size: 13px; color: #2d3748; font-weight: 600;'
                          >{{fromDate}} - {{toDate}}</div>
                        </div>
                      </td>
                      <td style='padding: 4px; width: 50%;'>
                        <div
                          style='padding: 8px; background-color: #ffffff; border-radius: 4px; border: 1px solid #e2e8f0;'
                        >
                          <div
                            style='font-size: 10px; color: #718096; text-transform: uppercase; letter-spacing: 0.5px;'
                          >Duration</div>
                          <div
                            style='font-size: 13px; color: #2d3748; font-weight: 600;'
                          >{{totalDays}} {{#if (eq totalDays 1)}}Day{{else}}Days{{/if}} ({{leaveType}})</div>
                        </div>
                      </td>
                    </tr>
                    <tr>
                      <td style='padding: 4px; width: 50%;'>
                        <div
                          style='padding: 8px; background-color: #ffffff; border-radius: 4px; border: 1px solid #e2e8f0;'
                        >
                          <div
                            style='font-size: 10px; color: #718096; text-transform: uppercase; letter-spacing: 0.5px;'
                          >Applied On</div>
                          <div
                            style='font-size: 13px; color: #2d3748; font-weight: 600;'
                          >{{appliedOn}}</div>
                        </div>
                      </td>
                      <td style='padding: 4px; width: 50%;'>
                        <div
                          style='padding: 8px; background-color: #ffffff; border-radius: 4px; border: 1px solid #e2e8f0;'
                        >
                          <div
                            style='font-size: 10px; color: #718096; text-transform: uppercase; letter-spacing: 0.5px;'
                          >Reason</div>
                          <div
                            style='font-size: 13px; color: #2d3748; font-weight: 600; overflow: hidden; text-overflow: ellipsis; white-space: nowrap;'
                          >{{reason}}</div>
                        </div>
                      </td>
                    </tr>
                  </table>
                  <div style='text-align: center;'>
                    <span class='status-badge urgent'>{{daysText}}</span>
                  </div>
                </div>
              </div>
            {{/each}}
          {{/if}}

          {{#if hasPending}}
            <!-- Pending Leaves Section -->
            <table width='100%' cellpadding='0' cellspacing='0' border='0' style='margin: 32px 0 16px 0;'>
              <tr>
                <td width='36' style='vertical-align: middle;'>
                  <div style='width: 28px; height: 28px; min-width: 28px; min-height: 28px; max-width: 28px; max-height: 28px; background-color: #bee3f8; border-radius: 50%; text-align: center; line-height: 28px;'>
                    <span style='font-size: 16px;'>‚è≥</span>
                  </div>
                </td>
                <td style='vertical-align: middle; padding-left: 8px;'>
                  <h3 style='font-size: 16px; font-weight: 600; margin: 0; color: #2c5282;'>Pending Leave Requests</h3>
                </td>
              </tr>
            </table>

            {{#each pendingLeaves}}
              <div class='leave-item pending'>
                <div class='leave-header'>
                  <table width='100%' cellpadding='0' cellspacing='0' border='0'>
                    <tr>
                      <td>
                        <p class='leave-employee'>{{employeeName}}</p>
                      </td>
                      <td style='text-align: right;'>
                        <span class='category-badge'>{{leaveCategory}}</span>
                      </td>
                    </tr>
                  </table>
                </div>
                <div class='leave-body'>
                  <table width='100%' cellpadding='0' cellspacing='0' border='0'>
                    <tr>
                      <td style='padding: 4px; width: 50%;'>
                        <div
                          style='padding: 8px; background-color: #ffffff; border-radius: 4px; border: 1px solid #e2e8f0;'
                        >
                          <div
                            style='font-size: 10px; color: #718096; text-transform: uppercase; letter-spacing: 0.5px;'
                          >Leave Dates</div>
                          <div
                            style='font-size: 13px; color: #2d3748; font-weight: 600;'
                          >{{fromDate}} - {{toDate}}</div>
                        </div>
                      </td>
                      <td style='padding: 4px; width: 50%;'>
                        <div
                          style='padding: 8px; background-color: #ffffff; border-radius: 4px; border: 1px solid #e2e8f0;'
                        >
                          <div
                            style='font-size: 10px; color: #718096; text-transform: uppercase; letter-spacing: 0.5px;'
                          >Duration</div>
                          <div
                            style='font-size: 13px; color: #2d3748; font-weight: 600;'
                          >{{totalDays}} {{#if (eq totalDays 1)}}Day{{else}}Days{{/if}} ({{leaveType}})</div>
                        </div>
                      </td>
                    </tr>
                    <tr>
                      <td style='padding: 4px; width: 50%;'>
                        <div
                          style='padding: 8px; background-color: #ffffff; border-radius: 4px; border: 1px solid #e2e8f0;'
                        >
                          <div
                            style='font-size: 10px; color: #718096; text-transform: uppercase; letter-spacing: 0.5px;'
                          >Applied On</div>
                          <div
                            style='font-size: 13px; color: #2d3748; font-weight: 600;'
                          >{{appliedOn}}</div>
                        </div>
                      </td>
                      <td style='padding: 4px; width: 50%;'>
                        <div
                          style='padding: 8px; background-color: #ffffff; border-radius: 4px; border: 1px solid #e2e8f0;'
                        >
                          <div
                            style='font-size: 10px; color: #718096; text-transform: uppercase; letter-spacing: 0.5px;'
                          >Reason</div>
                          <div
                            style='font-size: 13px; color: #2d3748; font-weight: 600; overflow: hidden; text-overflow: ellipsis; white-space: nowrap;'
                          >{{reason}}</div>
                        </div>
                      </td>
                    </tr>
                  </table>
                  <div style='text-align: center;'>
                    <span class='status-badge pending'>{{daysText}}</span>
                  </div>
                </div>
              </div>
            {{/each}}
          {{/if}}

          <!-- Warning/Info Box based on urgency -->
          {{#if (eq urgencyLevel "critical")}}
          <div class='critical-box'>
            <p>
              <strong>üö® Final Reminder:</strong>
              Leaves will be auto-approved <strong>tomorrow</strong> for payroll processing. 
              Please review and take action today to ensure accurate payroll.
            </p>
          </div>
          {{else if (eq urgencyLevel "urgent")}}
          <div class='warning-box'>
            <p>
              <strong>‚ö†Ô∏è Action Required:</strong>
              Auto-approval is approaching in {{daysUntilAutoApproval}} days. 
              Please review pending leaves before payroll processing begins.
            </p>
          </div>
          {{else}}
          <div class='note-box'>
            <p>
              <strong>üí° Reminder:</strong>
              Review leave applications in bulk from the admin portal. 
              You can filter by employee, date range, or leave category for faster processing.
            </p>
          </div>
          {{/if}}

          <div class='button-container'>
            <a href='{{adminPortalUrl}}' class='button'>Review Pending Leaves</a>
          </div>

          <div class='divider'></div>

          <p class='message-text' style='font-size: 13px;'>
            <strong>Why timely approval matters:</strong>
          </p>
          <ul style='color: #4a5568; font-size: 13px; margin: 0 0 20px 0; padding-left: 20px;'>
            <li>Ensures accurate attendance records for payroll</li>
            <li>Allows managers to plan team capacity effectively</li>
            <li>Gives employees clarity on their leave status</li>
            <li>Prevents last-minute auto-approvals without proper review</li>
          </ul>

          <div class='signature'>
            <p>
              Best regards,<br />
              <span class='signature-name'>{{companyName}} HRMS</span>
            </p>
          </div>
        </div>

        <div class='footer'>
          <p class='footer-text'>This is an automated reminder. Please do not reply directly to
            this email.</p>
          <p class='footer-company'>&copy;
            {{currentYear}}
            {{companyName}}. All rights reserved.</p>
        </div>
      </div>
    </div>
  </body>
</html>

