<html lang='en' dir='ltr'>
  <head>
    <meta charset='UTF-8' />
    <meta name='viewport' content='width=device-width, initial-scale=1.0' />
    <meta name='color-scheme' content='light' />
    <meta name='supported-color-schemes' content='light' />
    <title>Cron Job Failure Alert - {{companyName}}</title>
    <style>
      body { margin: 0; padding: 0; width: 100%; font-family: 'Segoe UI', Tahoma, Geneva, Verdana,
      sans-serif; font-size: 15px; line-height: 1.6; color: #2d3748; background-color: #fef2f2; }
      .email-wrapper { padding: 40px 20px; background: linear-gradient(135deg, #fef2f2 0%, #fee2e2
      100%); } .email-container { max-width: 650px; margin: 0 auto; background-color: #ffffff;
      border-radius: 12px; box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1); overflow: hidden; } .header {
      background: linear-gradient(135deg, #dc2626 0%, #b91c1c 50%, #991b1b 100%); padding: 32px
      40px; text-align: center; } .alert-icon { font-size: 48px; margin-bottom: 12px; display:
      block; } .alert-title { color: #ffffff; font-size: 24px; font-weight: 700; margin: 0 0 4px 0;
      text-shadow: 1px 1px 2px rgba(0,0,0,0.2); } .alert-subtitle { color: #fecaca; font-size: 14px;
      margin: 0; } .content { padding: 32px 40px; } .section-title { color: #991b1b; font-size:
      14px; font-weight: 700; text-transform: uppercase; letter-spacing: 1px; margin: 0 0 16px 0;
      padding-bottom: 8px; border-bottom: 2px solid #fecaca; } .info-table { width: 100%;
      border-collapse: collapse; margin-bottom: 24px; } .info-table td { padding: 12px 0;
      border-bottom: 1px solid #fee2e2; } .info-table td:first-child { color: #6b7280; font-size:
      13px; font-weight: 600; width: 140px; vertical-align: top; } .info-table td:last-child {
      color: #1f2937; font-size: 14px; } .info-table tr:last-child td { border-bottom: none; }
      .job-name { background: #fef2f2; color: #dc2626; padding: 4px 12px; border-radius: 4px;
      font-family: 'Courier New', Courier, monospace; font-weight: 700; display: inline-block; }
      .job-type { background: #fef3c7; color: #92400e; padding: 2px 8px; border-radius: 4px;
      font-size: 12px; font-weight: 600; } .error-box { background: #1f2937; border-radius: 8px;
      padding: 20px; margin: 16px 0; overflow-x: auto; } .error-message { color: #ef4444;
      font-family: 'Courier New', Courier, monospace; font-size: 14px; margin: 0 0 12px 0;
      word-break: break-word; } .error-stack { color: #9ca3af; font-family: 'Courier New', Courier,
      monospace; font-size: 12px; white-space: pre-wrap; word-break: break-word; margin: 0;
      max-height: 200px; overflow-y: auto; } .timestamp { color: #6b7280; font-size: 13px; }
      .duration { background: #fee2e2; color: #dc2626; padding: 2px 8px; border-radius: 4px;
      font-size: 13px; font-weight: 600; } .action-notice { background: #fffbeb; border: 1px solid
      #fde68a; border-left: 4px solid #f59e0b; padding: 16px 20px; border-radius: 0 8px 8px 0;
      margin: 24px 0; } .action-notice strong { color: #92400e; } .action-notice p { margin: 0;
      color: #78350f; font-size: 14px; } .divider { height: 1px; background-color: #fee2e2; margin:
      24px 0; } .footer { background: #fee2e2; text-align: center; padding: 20px 40px; }
      .footer-text { color: #991b1b; font-size: 12px; margin: 0 0 4px 0; } .footer-company { color:
      #b91c1c; font-size: 11px; margin: 0; } @media screen and (max-width: 600px) { .content {
      padding: 24px 20px; } .header { padding: 24px 20px; } .info-table td:first-child { width:
      100px; } }
    </style>
  </head>
  <body>
    <div class='email-wrapper'>
      <div class='email-container'>
        <div class='header'>
          <span class='alert-icon'>üö®</span>
          <h1 class='alert-title'>Cron Job Failed</h1>
          <p class='alert-subtitle'>Immediate attention required</p>
        </div>

        <div class='content'>
          <h3 class='section-title'>üìã Job Details</h3>
          <table
            width='100%'
            cellpadding='0'
            cellspacing='0'
            border='0'
            style='margin-bottom: 24px;'
          >
            <tr>
              <td
                style='padding: 12px 0; border-bottom: 1px solid #fee2e2; color: #6b7280; font-size: 13px; font-weight: 600; width: 120px; vertical-align: top;'
              >Job Name</td>
              <td
                style='padding: 12px 0; border-bottom: 1px solid #fee2e2; color: #1f2937; font-size: 14px; text-align: right;'
              ><span class='job-name'>{{jobName}}</span></td>
            </tr>
            <tr>
              <td
                style='padding: 12px 0; border-bottom: 1px solid #fee2e2; color: #6b7280; font-size: 13px; font-weight: 600; vertical-align: top;'
              >Job Type</td>
              <td
                style='padding: 12px 0; border-bottom: 1px solid #fee2e2; color: #1f2937; font-size: 14px; text-align: right;'
              ><span class='job-type'>{{jobType}}</span></td>
            </tr>
            <tr>
              <td
                style='padding: 12px 0; border-bottom: 1px solid #fee2e2; color: #6b7280; font-size: 13px; font-weight: 600; vertical-align: top;'
              >Started At</td>
              <td
                style='padding: 12px 0; border-bottom: 1px solid #fee2e2; color: #6b7280; font-size: 13px; text-align: right;'
              >{{startedAt}}</td>
            </tr>
            <tr>
              <td
                style='padding: 12px 0; border-bottom: 1px solid #fee2e2; color: #6b7280; font-size: 13px; font-weight: 600; vertical-align: top;'
              >Failed At</td>
              <td
                style='padding: 12px 0; border-bottom: 1px solid #fee2e2; color: #6b7280; font-size: 13px; text-align: right;'
              >{{failedAt}}</td>
            </tr>
            <tr>
              <td
                style='padding: 12px 0; border-bottom: 1px solid #fee2e2; color: #6b7280; font-size: 13px; font-weight: 600; vertical-align: top;'
              >Duration</td>
              <td
                style='padding: 12px 0; border-bottom: 1px solid #fee2e2; color: #1f2937; font-size: 14px; text-align: right;'
              ><span class='duration'>{{durationMs}} ms</span></td>
            </tr>
            {{#if serverName}}
              <tr>
                <td
                  style='padding: 12px 0; color: #6b7280; font-size: 13px; font-weight: 600; vertical-align: top;'
                >Server</td>
                <td
                  style='padding: 12px 0; color: #1f2937; font-size: 14px; text-align: right;'
                >{{serverName}}</td>
              </tr>
            {{/if}}
          </table>

          <h3 class='section-title'>‚ùå Error Details</h3>
          <div class='error-box'>
            <p class='error-message'>{{errorMessage}}</p>
            {{#if errorStack}}
              <pre class='error-stack'>{{errorStack}}</pre>
            {{/if}}
          </div>

          <div class='action-notice'>
            <p><strong>‚ö†Ô∏è Action Required:</strong>
              Please investigate this failure immediately. Check the server logs for more details
              and ensure the cron job is functioning correctly.</p>
          </div>

          <div class='divider'></div>

          <p style='color: #6b7280; font-size: 13px; margin: 0;'>
            This is an automated alert from the
            {{companyName}}
            HRMS system. The cron job monitoring system detected this failure and sent this
            notification.
          </p>
        </div>

        <div class='footer'>
          <p class='footer-text'>This is an automated system alert. Please do not reply.</p>
          <p class='footer-company'>&copy; {{currentYear}} {{companyName}}. All rights reserved.</p>
        </div>
      </div>
    </div>
  </body>
</html>